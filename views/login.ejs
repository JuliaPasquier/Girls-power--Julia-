<%- include('partials/header'); -%>
<style>

</style>

    <form class="container" method="POST">
        <h2 class="title">login</h2>

        <label for="email">Email</label>
        <input type="text" name="email" id="email"></input>
        <div class="email error"></div>

        <label for="password">Password</label>
        <input type="password" name="password" id="password"></input>
        <div class="password error"></div>

        <button type="submit">login</button>
        <a class="register" href="/register">register</a>
    </form>

    <%- include('partials/footer'); -%>

        <script>
            const form = document.querySelector('form');
            form.addEventListener('submit', async (e) => {
                e.preventDefault();

                const email = form.email.value;
                const password = form.password.value;

                try {

                    const res = await fetch("/login", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ email, password }),

                    });

                    res.json()
                    if (res.status === 200) {
                        window.location.href = "/";
                    }
                }
                catch (err) {
                    console.log(err);

                }
            })

        </script>